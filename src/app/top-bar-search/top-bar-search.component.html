<div class="top-bar-search">

  <i class="fas fa-search top-bar-search__search-icon"></i>
  <i class="fas fa-times top-bar-search__close-icon" *ngIf="query.length > 0" (click)="clearQuery()"></i>

  <input (keyup)="attemptSearch()" (keydown)="clearTimeout1()" [(ngModel)]="query" placeholder="Search for movie, tv-show or actor ..." class="top-bar-search__input" type="text">

  <button class="top-bar-search-mobile__btn" (click)="showContainer=true"><i class="fas fa-search"></i></button>

  <div class="top-bar-search__container" [hidden]="!showContainer">

    <div class="top-bar-search-mobile">

      <div class="top-bar-search-mobile__container">
        <div class="container position-relative">
          <input (keyup)="search()" [(ngModel)]="query" placeholder="Search for movie, tv-show or actor ..." type="text" class="top-bar-search-mobile__input">
        </div>
        <i class="top-bar-search-mobile__close fas fa-times" (click)="showContainer=false"></i>
      </div>
    </div>


    <div class="top-bar-search-results">

      <div class="lds-ellipsis" *ngIf="showLoading"><div></div><div></div><div></div><div></div></div>
      <div class="top-bar-search-results__test">
        <div class="container">

          <h3 class="top-bar-search-results__header" *ngIf="movies.length">Movies</h3>

          <ng-container *ngFor="let movie of movies; let i = index">
            <div class="top-bar-search-results__item" *ngIf="i < 5" (click)="redirectAndClear('/movie', movie.id)">
              <img class="top-bar-search-results__img"
                   [src]="movie['poster_path'] ? 'https://image.tmdb.org/t/p/w92' + movie['poster_path'] : '/assets/images/placeholder-poster.png'" alt="">
              <div class="top-bar-search-results__container">
                <span class="top-bar-search-results__title">{{ movie['title'] }}</span>
              </div>
            </div>
          </ng-container>

          <h3 class="top-bar-search-results__header" *ngIf="tv.length">Tv shows</h3>

          <ng-container *ngFor="let show of tv; let i = index">
            <div class="top-bar-search-results__item" *ngIf="i < 5">
              <img class="top-bar-search-results__img"
                   [src]="show['poster_path'] ? 'https://image.tmdb.org/t/p/w92' + show['poster_path'] : '/assets/images/placeholder-poster.png'" alt="">
              <div class="top-bar-search-results__container">
                <span class="top-bar-search-results__title">{{ show['name'] }}</span>
              </div>
            </div>
          </ng-container>


          <h3 class="top-bar-search-results__header" *ngIf="people.length">People</h3>

          <ng-container *ngFor="let person of people; let i = index">
            <div class="top-bar-search-results__item" *ngIf="i < 5" (click)="redirectAndClear('/person', person.id)">
              <img class="top-bar-search-results__img"
                   [src]="person['profile_path'] ? 'https://image.tmdb.org/t/p/w45' + person['profile_path'] : '/assets/images/placeholder-poster.png'" alt="">
              <div class="top-bar-search-results__container">
                <span class="top-bar-search-results__title">{{ person['name'] }}</span>
              </div>
            </div>
          </ng-container>

        </div>
      </div>



    </div>


  </div>

</div>

